<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JUSDC Official Dashboard</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body { font-family: Arial, sans-serif; background:#f4f4f4; margin:20px; }
  h1 { color:#2a7ae2; margin-bottom:5px; }
  p.version { color:gray; font-size:14px; margin-bottom:20px; }
  .price-box { background:#2a7ae2; color:white; padding:12px; border-radius:6px; display:inline-block; margin-bottom:20px; font-size:18px; }
  #chart-container, #trades, #tokenTable, #cseResults { background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); margin-bottom:20px; }
  .trade { display:flex; justify-content:space-between; padding:5px 0; border-bottom:1px solid #eee; }
  .trade.buy { color:green; }
  .trade.sell { color:red; }
  table { width:100%; border-collapse: collapse; }
  th, td { padding:12px; text-align:left; border-bottom:1px solid #eee; }
  th { background:#2a7ae2; color:white; }
  tr:hover { background:#f1f1f1; }
  .token-logo { width:24px; vertical-align:middle; margin-right:8px; }
  .cse-item { margin-bottom:15px; }
  .cse-title { font-weight:bold; color:#2a7ae2; text-decoration:none; font-size:16px; }
  .cse-link { font-size:14px; color:#555; display:block; margin-bottom:3px; }
  .cse-snippet { font-size:14px; color:#333; }
</style>
</head>
<body>

<h1>JUSDC Official Dashboard</h1>
<p class="version">Version: 1.0.0 | Last Updated: 2025-08-17</p>

<div class="price-box" id="jusdcPrice">Loading JUSDC price...</div>

<div id="chart-container">
  <canvas id="priceChart"></canvas>
</div>

<h2>Recent Trades</h2>
<div id="trades">Loading trades...</div>

<h2>Official Token List</h2>
<div id="tokenTable">
  <table>
    <thead>
      <tr>
        <th>Network</th>
        <th>Symbol</th>
        <th>Name</th>
        <th>Address</th>
        <th>Logo</th>
      </tr>
    </thead>
    <tbody id="tokenList"><tr><td colspan="5">Loading...</td></tr></tbody>
  </table>
</div>

<h2>Search Results (Blockchain / JUSDC)</h2>
<div id="cseResults">Loading search results...</div>

<script>
const tokenList = [
  { chain:"Ethereum", address:"0x3a4184028de3f2B2fB63d596ec9101328aC7A736", symbol:"JUSDC", name:"JUSDC", logo:"https://cdn.coinranking.com/cojKHfduR/JUSDC.PNG" },
  { chain:"Base", address:"0xC6b9F1360a4C50DB8EccBCAc448b51737B101AA5", symbol:"JUSDC", name:"JUSDC (Base)", logo:"https://cdn.coinranking.com/cojKHfduR/JUSDC.PNG" },
  { chain:"Polygon", address:"0xFfF13F7Df6db0811A45b162D5CA742f970888eE0", symbol:"JUSDC", name:"JUSDC (Polygon)", logo:"https://cdn.coinranking.com/cojKHfduR/JUSDC.PNG" }
];

// ===== 1. Fetch JUSDC Price Chart =====
let priceChart;
async function fetchPrice() {
  try {
    const res = await fetch("https://api.coingecko.com/api/v3/coins/jusdc/market_chart?vs_currency=usd&days=1&interval=hourly");
    const data = await res.json();
    const prices = data.prices.map(p => ({x:new Date(p[0]), y:p[1]}));

    if(priceChart){
      priceChart.data.datasets[0].data = prices;
      priceChart.update();
    } else {
      const ctx = document.getElementById('priceChart').getContext('2d');
      priceChart = new Chart(ctx, {
        type:'line',
        data:{ datasets:[{
          label:'JUSDC Price (USD)',
          data: prices,
          borderColor:'#2a7ae2',
          backgroundColor:'rgba(42,122,226,0.2)',
          fill:true,
          tension:0.2
        }]},
        options:{
          parsing:{xAxisKey:'x', yAxisKey:'y'},
          scales:{
            x:{ type:'time', time:{ unit:'hour' }, title:{display:true,text:'Time'} },
            y:{ title:{display:true,text:'Price (USD)'} }
          }
        }
      });
    }

    const latestPrice = prices[prices.length-1].y;
    document.getElementById("jusdcPrice").innerText = `üí∞ JUSDC Live Price: $${latestPrice.toFixed(4)}`;
  } catch(err){
    document.getElementById("jusdcPrice").innerText = "‚ö†Ô∏è Error fetching price";
    console.error(err);
  }
}

// ===== 2. Recent Trades (Dummy) =====
function fetchTrades() {
  const tradesDiv = document.getElementById('trades');
  tradesDiv.innerHTML = '';
  for(let i=0;i<20;i++){
    const div = document.createElement('div');
    div.className = `trade ${i%2==0?'buy':'sell'}`;
    div.innerHTML = `<span>${i%2==0?'BUY':'SELL'} ${Math.floor(Math.random()*1000)} JUSDC</span><span>$${(Math.random()*1).toFixed(4)}</span>`;
    tradesDiv.appendChild(div);
  }
}

// ===== 3. Token List Table =====
function loadTokenList(){
  const tbody = document.getElementById('tokenList');
  tbody.innerHTML = '';
  tokenList.forEach(token=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${token.chain}</td>
      <td>${token.symbol}</td>
      <td>${token.name}</td>
      <td>${token.address}</td>
      <td><img src="${token.logo}" class="token-logo"/></td>
    `;
    tbody.appendChild(tr);
  });
}

// ===== 4. CSE Search Results =====
// Safe approach: paste server-side fetched JSON here
const cseResultsData = [
  {
    title:"What is blockchain? | Euromoney Learning",
    link:"https://www.emlearning.com/blockchain-explained/what-is-blockchain",
    snippet:"A blockchain is essentially a digital ledger of transactions..."
  },
  {
    title:"Blockchain Technology Explained | IBM",
    link:"https://www.ibm.com/topics/what-is-blockchain",
    snippet:"Blockchain technology is a distributed ledger system..."
  }
];

function loadCSEResults(){
  const cseDiv = document.getElementById('cseResults');
  cseDiv.innerHTML = '';
  cseResultsData.forEach(item=>{
    const div = document.createElement('div');
    div.className = 'cse-item';
    div.innerHTML = `
      <a href="${item.link}" target="_blank" class="cse-title">${item.title}</a>
      <span class="cse-link">${item.link}</span>
      <p class="cse-snippet">${item.snippet}</p>
    `;
    cseDiv.appendChild(div);
  });
}

// ====== Run All ======
fetchPrice();
fetchTrades();
loadTokenList();
loadCSEResults();

// Auto refresh
setInterval(fetchPrice, 30000);
setInterval(fetchTrades, 10000);

</script>

</body>
</html>
